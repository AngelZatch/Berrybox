function featureBadge(e){$.post("functions/feature_badge.php",{badge_id:e}).done(function(e){console.log(e),e&&(-1!=e?($(".badge-box").removeClass("featured"),$("#badge-"+e).addClass("featured")):console.log("invalid badge"))})}function fetchBadges(e){return $.get("functions/fetch_badges.php",{target_token:e})}function renderBadges(e){for(var a="",n=JSON.parse(e),d=0;d<n.length;d++){var o="";o=null==n[d].featured||0==n[d].featured?"":" featured",featurable_class=n[d].featurable?" badge-user":"",a+="<div class='badge-container panel-box-container col-xs-3'>",a+="<div class='panel badge-box"+featurable_class+o+"' id='badge-"+n[d].id+"' data-badge='"+n[d].id+"'>",a+="<div class='panel-body box-entry'>",a+="<img src='"+n[d].icon+"' alt='' class='img-responsive center-block'>",a+="<div class='badge-details'>",a+="<p class='badge-title'>"+n[d].name+"</p>",a+="<p class='badge-undertitle'>"+n[d].description+"</p>",a+="<span class='badge-unlocked'>",a+=n[d].unlock_date?moment(moment.utc(n[d].unlock_date)).local().format("lll"):n[d].status,a+="</span>",a+="</div>",a+="</div>",a+="</div>",a+="</div>"}return a}function unlockBadge(e){if(console.log("badge unlocked"),1==window.badge_alert_size){var a="<div class='badge-unlock-container center-block'>";a+="<div class='badge-unlock'>",a+="<legend>"+language_tokens.unlocked+"</legend>",a+="<img src='assets/badges/"+e.badge_icon+".png' class='img-responsive unlocked-badge'>",a+="<p class='unlocked-badge-title'>"+language_tokens[e.badge_name]+"</p>",a+="<p class='system-message'>"+language_tokens.unlocked_tip+"</p>",a+="</div>",a+="</div>",$("body").append(a),setTimeout(function(){$(".unlocked-badge").slideToggle()},"1500"),setTimeout(function(){$(".unlocked-badge").hide(),$(".badge-unlock-container").remove()},"6300"),$(".badge-unlock-container").show().animate({backgroundColor:"rgba(16,16,16,0.9)"},400).delay(5e3).queue(function(){$(this).animate({opacity:"0"},900).dequeue()})}else{var n=language_tokens.unlocked+" : "+language_tokens[e.badge_name];setTimeout(function(){$("#body-chat").notify(n,{arrowShow:!1,autoHideDelay:3e3,className:"success",gap:2,position:"left-top",style:"berrybox"})},4e3)}}$(document).on("click",".badge-user",function(){var e=$(this).data("badge");featureBadge(e)});