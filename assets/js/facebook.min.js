function checkLoginState(){FB.getLoginStatus(function(e){statusChangeCallback(e)})}function getUserInfo(e){FB.api("/me?fields=id,email,name",function(n){$.post("functions/facebook_login.php",{facebook_token:e.authResponse.userID,access_token:e.authResponse.accessToken,user:n.name,mail:n.email}).done(function(){window.top.location="home"})})}function login(){FB.login(function(e){getUserInfo(e)},{scope:"public_profile,email"})}function statusChangeCallback(e){"connected"===e.status?getUserInfo(e):"not_authorized"===e.status}window.fbAsyncInit=function(){$.get("functions/get_facebook_id.php").done(function(e){FB.init({appId:JSON.parse(e),cookie:!0,xfbml:!0,version:"v2.8"}),FB.getLoginStatus(function(e){statusChangeCallback(e)})})},function(e,n,t){var o,a=e.getElementsByTagName(n)[0];e.getElementById(t)||(o=e.createElement(n),o.id=t,o.src="//connect.facebook.net/en_US/sdk.js",a.parentNode.insertBefore(o,a))}(document,"script","facebook-jssdk");